<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Erdem Karaköylü">
<meta name="dcterms.date" content="2022-01-15">
<meta name="description" content="A Bayesian analysis of voting tendencies in Estonia">

<title>BayEstonia! – Erdem Karaköylü</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-22381ab97ffb8a420d3841344730e94d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Erdem Karaköylü</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../portfolio.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">BayEstonia!</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Bayesian A/B/n</div>
    <div class="quarto-category">categorical regression</div>
    <div class="quarto-category">ZeroSumNormal</div>
    <div class="quarto-category">Python</div>
  </div>
  </div>

<div>
  <div class="description">
    A Bayesian analysis of voting tendencies in Estonia
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Erdem Karaköylü </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 15, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><u><strong>Preamble</strong></u>: This is a data analysis and modeling project to predict voter party preference in Estonia on the basis of demographics. The intended process involves initial data exploration, followed by the construction, fitting, and analysis of a series of increasingly complex Bayesian categorical models. This Bayesian approach offers a robust alternative to traditional frequentist Analysis of Variance (ANOVA) methods commonly employed in scientific research and A/B/n testing in fields such as marketing, user experience (UX), and web design. A significant benefit of the Bayesian model is its inherent ability to quantify predictive uncertainty through the calculation of posterior (inferential) probability distributions, contrasting with the reliance on sampling distributions in frequentist procedures</p>
<p><u><strong>Contents</strong></u>:</p>
<ol type="1">
<li>Exploratory Data Analysis</li>
<li>Modeling <br> <span class="math inline">\(→\)</span> Model Building and, Prior Elicitation and Prior Predictive Checks <br> <span class="math inline">\(→\)</span> Model Fitting and Goodness-of-Fit Analysis <br> <span class="math inline">\(→\)</span> Posterior Predictive Checks <br> <span class="math inline">\(→\)</span> Summary and Conclusion</li>
</ol>
<p><u><strong>Data Provenance</strong></u>: This data is courtesy of <a href="https://salk.ee/">SALK</a>. SALK refers to the Liberal Citizen Foundation in Estonia; a political organization aimed at influencing Estonian policy and parliamentary elections. This foundation was established with the (ultimately attained) goal of helping liberal forces gain a majority in the 2023 Estonian parliamentary elections.</p>
<p><u><strong>Acknowledgments</strong></u>: I thank <a href="https://topmate.io/alex_andorra">Alex Andorra</a> and the folks at <a href="https://www.intuitivebayes.com/">Intuitive Bayes</a> for helping me understand non-identifiability and overparameterization in statistical modeling.</p>
<div id="b34911c2" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> pp</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> rcParams</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="1db6bcf4" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>rcParams[<span class="st">'font.size'</span>] <span class="op">=</span> <span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="exploratory-data-analysis" class="level4">
<h4 class="anchored" data-anchor-id="exploratory-data-analysis">1. Exploratory Data Analysis</h4>
<div id="312e60e3" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'~/projex/elections/data/estonian-data.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="4bb34ea0" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data.head().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">age_group</td>
<td>16-24</td>
<td>16-24</td>
<td>16-24</td>
<td>16-24</td>
<td>16-24</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">education</td>
<td>Basic education</td>
<td>Basic education</td>
<td>Basic education</td>
<td>Basic education</td>
<td>Basic education</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">gender</td>
<td>Male</td>
<td>Male</td>
<td>Male</td>
<td>Male</td>
<td>Male</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">nationality</td>
<td>Estonian</td>
<td>Estonian</td>
<td>Estonian</td>
<td>Estonian</td>
<td>Estonian</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">electoral_district</td>
<td>Haabersti, Põhja-Tallinn ja Kristiine</td>
<td>Harju- ja Raplamaa</td>
<td>Harju- ja Raplamaa</td>
<td>Harju- ja Raplamaa</td>
<td>Harju- ja Raplamaa</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">unit</td>
<td>Kristiine</td>
<td>Harjumaa</td>
<td>Harjumaa</td>
<td>Harjumaa</td>
<td>Harjumaa</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">EKRE</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Eesti 200</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Hard to say</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Isamaa</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Keskerakond</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mitte ükski erakond</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Other</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Parempoolsed</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Reformierakond</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Rohelised</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">SDE</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I don’t like the “Hard to say” column name; replace below with the clearer “Undecided” label.</p>
<div id="9e6b5fda" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data.rename(columns<span class="op">=</span>{<span class="st">'Hard to say'</span>: <span class="st">'Undecided'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="fa7a3d99" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 5206 entries, 0 to 5205
Data columns (total 17 columns):
 #   Column               Non-Null Count  Dtype 
---  ------               --------------  ----- 
 0   age_group            5206 non-null   object
 1   education            5206 non-null   object
 2   gender               5206 non-null   object
 3   nationality          5206 non-null   object
 4   electoral_district   5206 non-null   object
 5   unit                 5206 non-null   object
 6   EKRE                 5206 non-null   int64 
 7   Eesti 200            5206 non-null   int64 
 8   Undecided            5206 non-null   int64 
 9   Isamaa               5206 non-null   int64 
 10  Keskerakond          5206 non-null   int64 
 11  Mitte ükski erakond  5206 non-null   int64 
 12  Other                5206 non-null   int64 
 13  Parempoolsed         5206 non-null   int64 
 14  Reformierakond       5206 non-null   int64 
 15  Rohelised            5206 non-null   int64 
 16  SDE                  5206 non-null   int64 
dtypes: int64(11), object(6)
memory usage: 691.6+ KB</code></pre>
</div>
</div>
<div id="e2537a5d" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data.columns.tolist()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>['age_group',
 'education',
 'gender',
 'nationality',
 'electoral_district',
 'unit',
 'EKRE',
 'Eesti 200',
 'Undecided',
 'Isamaa',
 'Keskerakond',
 'Mitte ükski erakond',
 'Other',
 'Parempoolsed',
 'Reformierakond',
 'Rohelised',
 'SDE']</code></pre>
</div>
</div>
<div id="d7b7d5dd" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">EKRE</td>
<td>5206.0</td>
<td>0.124856</td>
<td>0.330587</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Eesti 200</td>
<td>5206.0</td>
<td>0.082981</td>
<td>0.275880</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Undecided</td>
<td>5206.0</td>
<td>0.127353</td>
<td>0.333400</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Isamaa</td>
<td>5206.0</td>
<td>0.054552</td>
<td>0.227126</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Keskerakond</td>
<td>5206.0</td>
<td>0.119285</td>
<td>0.324155</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mitte ükski erakond</td>
<td>5206.0</td>
<td>0.181521</td>
<td>0.385487</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Other</td>
<td>5206.0</td>
<td>0.007876</td>
<td>0.088403</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Parempoolsed</td>
<td>5206.0</td>
<td>0.002305</td>
<td>0.047960</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Reformierakond</td>
<td>5206.0</td>
<td>0.215136</td>
<td>0.410956</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Rohelised</td>
<td>5206.0</td>
<td>0.017480</td>
<td>0.131063</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">SDE</td>
<td>5206.0</td>
<td>0.066654</td>
<td>0.249446</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="dfa1f7d7" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data.loc[:, <span class="st">'EKRE'</span>:].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>).describe().loc[[<span class="st">'min'</span>, <span class="st">'max'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>min    1.0
max    1.0
dtype: float64</code></pre>
</div>
</div>
<div id="05fcffd6" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>data.loc[:, <span class="st">'EKRE'</span>:].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, title<span class="op">=</span><span class="st">'Party Choice'</span>, ylabel<span class="op">=</span><span class="st">'Counts'</span>, color<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-11-output-1.png" width="611" height="578" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="87d749b6" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>data.electoral_district.unique().size, data.unit.unique().size</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(12, 24)</code></pre>
</div>
</div>
<div id="6c680f19" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>f, (left, right) <span class="op">=</span> pp.subplots(ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data.electoral_district.value_counts(normalize<span class="op">=</span><span class="va">True</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span>[<span class="st">'black'</span>, <span class="st">'darkgray'</span>], ax<span class="op">=</span>left)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>data.unit.value_counts(normalize<span class="op">=</span><span class="va">True</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span>[<span class="st">'darkgray'</span>, <span class="st">'black'</span>])</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>left.set_xticklabels(left.get_xticklabels(), rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>f.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-13-output-1.png" width="1147" height="558" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="731cd684" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>f, (left, right) <span class="op">=</span> pp.subplots(ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>data.age_group.value_counts(normalize<span class="op">=</span><span class="va">True</span>, sort<span class="op">=</span><span class="va">False</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span>[<span class="ss">f'C</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">7</span>)], ax<span class="op">=</span>left)<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>data.gender.value_counts(normalize<span class="op">=</span><span class="va">True</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span> [<span class="st">'C7'</span>, <span class="st">'C8'</span>], ax<span class="op">=</span>right)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>left.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="st">'Fraction'</span>, xlabel<span class="op">=</span><span class="st">'age group'</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>f.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-14-output-1.png" width="945" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="d5dfcb4f" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data.education.value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>education
Secondary education    2684
Higher education       1948
Basic education         574
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="c5de0787" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>f, (left, right) <span class="op">=</span> pp.subplots(ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>data.education.value_counts(normalize<span class="op">=</span><span class="va">True</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span>[<span class="ss">f'C</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">3</span>)], ax<span class="op">=</span>left)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>data.nationality.value_counts(normalize<span class="op">=</span><span class="va">True</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, color<span class="op">=</span>[<span class="st">'C3'</span>, <span class="st">'C4'</span>])</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>left.set_xticklabels(left.get_xticklabels(), rotation<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>f.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-16-output-1.png" width="945" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="preliminary-summary" class="level5">
<h5 class="anchored" data-anchor-id="preliminary-summary">Preliminary summary:</h5>
<p>This table registers voter preference. Each row is a voter. Columns include voter demographics, the election district and unit. The rest of the columns are each dedicated to a party. Data are in the thousands with no apparent missing value. There are two types of data; (1) strings that lend themselves to categorization, and (2) binary data indicating whether a given party has received the vote of that row’s voter. There were no irregularities, i.e.&nbsp;more than 1 vote registered for each person; there were no abstentions noted in this dataset either. All the data is categorical with the following number of categories: * Party choice <span class="math inline">\(→\)</span> 11 * Electoral district <span class="math inline">\(\rightarrow\)</span> 12 * (Electoral) Unit <span class="math inline">\(→\)</span> 24 * AGe group <span class="math inline">\(→\)</span> 7 * Gender <span class="math inline">\(→\)</span> 2 * Education <span class="math inline">\(→\)</span> 3 * Nationality <span class="math inline">\(→\)</span> 2</p>
</section>
<section id="preliminary-summary-part-2" class="level5">
<h5 class="anchored" data-anchor-id="preliminary-summary-part-2">Preliminary summary, part 2:</h5>
<p>There is some imbalance in education level, with secondary education being the more proeminent. There is notable imbalance in nationality, with predictable majority of Estonian representation. Party choice, electoral district and unit are also quite imbalanced. Next is to examine party representation breakdown at the group level. Note that I will not consider electoral district and unit hereafter as the emphasis is on demographics as a driver of party choice.</p>
<div id="23c98d8e" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_group_percentage(df: pd.DataFrame, category: <span class="st">'str'</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Computes percentage for each column in a group"""</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    group <span class="op">=</span> df.groupby(category).<span class="bu">sum</span>(numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    group_percent <span class="op">=</span> group.div(group.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>), axis<span class="op">=</span><span class="dv">0</span>)<span class="op">*</span><span class="dv">100</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> group_percent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="0ef0a3da" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>party_names <span class="op">=</span> data.loc[:, <span class="st">'EKRE'</span>:].columns.tolist()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>party_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>['EKRE',
 'Eesti 200',
 'Undecided',
 'Isamaa',
 'Keskerakond',
 'Mitte ükski erakond',
 'Other',
 'Parempoolsed',
 'Reformierakond',
 'Rohelised',
 'SDE']</code></pre>
</div>
</div>
<div id="583595a5" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age_group</th>
<th data-quarto-table-cell-role="th">education</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">nationality</th>
<th data-quarto-table-cell-role="th">electoral_district</th>
<th data-quarto-table-cell-role="th">unit</th>
<th data-quarto-table-cell-role="th">EKRE</th>
<th data-quarto-table-cell-role="th">Eesti 200</th>
<th data-quarto-table-cell-role="th">Undecided</th>
<th data-quarto-table-cell-role="th">Isamaa</th>
<th data-quarto-table-cell-role="th">Keskerakond</th>
<th data-quarto-table-cell-role="th">Mitte ükski erakond</th>
<th data-quarto-table-cell-role="th">Other</th>
<th data-quarto-table-cell-role="th">Parempoolsed</th>
<th data-quarto-table-cell-role="th">Reformierakond</th>
<th data-quarto-table-cell-role="th">Rohelised</th>
<th data-quarto-table-cell-role="th">SDE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>16-24</td>
<td>Basic education</td>
<td>Male</td>
<td>Estonian</td>
<td>Haabersti, Põhja-Tallinn ja Kristiine</td>
<td>Kristiine</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>16-24</td>
<td>Basic education</td>
<td>Male</td>
<td>Estonian</td>
<td>Harju- ja Raplamaa</td>
<td>Harjumaa</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>16-24</td>
<td>Basic education</td>
<td>Male</td>
<td>Estonian</td>
<td>Harju- ja Raplamaa</td>
<td>Harjumaa</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>16-24</td>
<td>Basic education</td>
<td>Male</td>
<td>Estonian</td>
<td>Harju- ja Raplamaa</td>
<td>Harjumaa</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>16-24</td>
<td>Basic education</td>
<td>Male</td>
<td>Estonian</td>
<td>Harju- ja Raplamaa</td>
<td>Harjumaa</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="a3a4b9b1" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data.groupby(<span class="st">'gender'</span>).<span class="bu">sum</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>numeric_only<span class="op">=</span><span class="va">True</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">EKRE</th>
<th data-quarto-table-cell-role="th">Eesti 200</th>
<th data-quarto-table-cell-role="th">Undecided</th>
<th data-quarto-table-cell-role="th">Isamaa</th>
<th data-quarto-table-cell-role="th">Keskerakond</th>
<th data-quarto-table-cell-role="th">Mitte ükski erakond</th>
<th data-quarto-table-cell-role="th">Other</th>
<th data-quarto-table-cell-role="th">Parempoolsed</th>
<th data-quarto-table-cell-role="th">Reformierakond</th>
<th data-quarto-table-cell-role="th">Rohelised</th>
<th data-quarto-table-cell-role="th">SDE</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Female</td>
<td>271</td>
<td>237</td>
<td>412</td>
<td>119</td>
<td>374</td>
<td>507</td>
<td>18</td>
<td>7</td>
<td>620</td>
<td>55</td>
<td>225</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Male</td>
<td>379</td>
<td>195</td>
<td>251</td>
<td>165</td>
<td>247</td>
<td>438</td>
<td>23</td>
<td>5</td>
<td>500</td>
<td>36</td>
<td>122</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="a697dd93" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>f, (left, right) <span class="op">=</span> pp.subplots(ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">11</span>, <span class="dv">4</span>), sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#gender = data.groupby('gender').sum(numeric_only=True)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#(gender.div(gender.sum(axis=1), axis=0)*100).plot(kind='bar', colormap='tab20c', ax=left, legend=False)</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#data.groupby('nationality').sum(numeric_only=True).plot(kind='bar', colormap='tab20c', ax=right, legend=False)</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>make_group_percentage(data, <span class="st">'gender'</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'tab20c'</span>, ax<span class="op">=</span>left, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>make_group_percentage(data, <span class="st">'nationality'</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'tab20c'</span>, ax<span class="op">=</span>right)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>left.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Gender'</span>, ylabel<span class="op">=</span><span class="st">'Fraction(%)'</span>, xlim<span class="op">=</span>(<span class="op">-</span><span class="fl">0.3</span>, <span class="fl">1.3</span>), xlabel<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>right.<span class="bu">set</span>(xlim<span class="op">=</span>(<span class="op">-</span><span class="fl">0.3</span>, <span class="fl">1.3</span>), title<span class="op">=</span><span class="st">'Nationality'</span>, xlabel<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>right.legend(frameon<span class="op">=</span><span class="va">False</span>, loc<span class="op">=</span>(<span class="fl">0.34</span> ,<span class="fl">0.04</span>), fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>right.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, ls<span class="op">=</span><span class="st">':'</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>left.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, ls<span class="op">=</span><span class="st">':'</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>f.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-21-output-1.png" width="1041" height="368" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="b28e125e" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>f, (top, bottom) <span class="op">=</span> pp.subplots(nrows<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#data.groupby('age_group').sum(numeric_only=True)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>make_group_percentage(data, <span class="st">'age_group'</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'tab20c'</span>, ax<span class="op">=</span>top, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#data.groupby('education').sum(numeric_only=True)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>make_group_percentage(data, <span class="st">'education'</span>).plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'tab20c'</span>, ax<span class="op">=</span>bottom, legend<span class="op">=</span><span class="va">False</span>, )</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>top.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Age Group'</span>, ylabel<span class="op">=</span><span class="st">'Fraction(%)'</span>, xlabel<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>top.set_xticklabels(top.get_xticklabels(), rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>bottom.legend(frameon<span class="op">=</span><span class="va">False</span>,  loc<span class="op">=</span>(<span class="fl">0.24</span>, <span class="fl">0.04</span>), fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>bottom.set_xticklabels(bottom.get_xticklabels(), rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>bottom.<span class="bu">set</span>(ylabel<span class="op">=</span><span class="st">'Fraction(%)'</span>, title<span class="op">=</span><span class="st">'Education'</span>, xlim<span class="op">=</span>(<span class="op">-</span><span class="fl">0.3</span>, <span class="fl">2.3</span>), xlabel<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>bottom.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, ls<span class="op">=</span><span class="st">':'</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>top.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, ls<span class="op">=</span><span class="st">':'</span>)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>f.tight_layout()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-22-output-1.png" width="1137" height="753" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="grouped-data-summary" class="level4">
<h4 class="anchored" data-anchor-id="grouped-data-summary">Grouped data summary</h4>
<ol type="1">
<li>Overall
<ul>
<li>Reformierakond (a liberal party) is pretty popular across the board except with non-Estonians;</li>
<li>Non-Estonians - I’m told - is almost entirely composed up of Russians;</li>
<li>There is a fair amount of undecided voters;</li>
<li>EKRE and Keskeradon are populist parties - EKRE is right-wing, Keskerakond is center-left;</li>
<li>Parempoolsed, center-right party is the underdog across the board.</li>
</ul></li>
<li>Group-specific
<ul>
<li><em>Gender</em>: there are some subtle differences.
<ul>
<li>Reformierakond is slightly more popular with female voters;</li>
<li>There are more undecided among female voters;</li>
<li>The right-wing EKRE is more popular with male voters.</li>
</ul></li>
<li><em>Nationality</em>:
<ul>
<li>Reformierakond, EKRE are more popular with Estonians;</li>
<li>Keskerakond, Mitte ukski erakond are favored by ethnic Russians who are also more numerous to be undecided.</li>
</ul></li>
<li><em>Age group</em>:
<ul>
<li>Mitte ukski erakond and Reformierakond are the two prevaiing parties among each age group except the two older tranches;</li>
<li>Among 65 and over Reformierakond retains the top but Mitte recedes in favor of Keskeradond.</li>
</ul></li>
<li><em>Education</em>:
<ul>
<li>EKRE, Undecided, Mitte ukski erakond are the top 3 party choices for those with a basic education;</li>
<li>Reformierakond and Mitte are the top 2 party choices among those with a college degree.</li>
<li>High school graduates exhibit a preference for Reformierakond, Mitte, and EKRE.</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="modeling" class="level4">
<h4 class="anchored" data-anchor-id="modeling">2. Modeling</h4>
<p>The goal is to predict party preference on the basis of available demographic data. I will first start with looking at two categories; education and nationality. The below is some data encoding to ease model fitting and clarity of plotted results. In particular note the model coordinate names; ‘party_choice’, ‘education’, ‘nationality’, ‘obs_idx’. The latter is just the row index of the dataframe containing the observations; each row corresponding to one observation.</p>
<div id="bf9443c0" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># response variable encoding</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>party_choice <span class="op">=</span> pd.Categorical(data[party_names].idxmax(axis<span class="op">=</span><span class="dv">1</span>), categories<span class="op">=</span>party_names, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>party_choice_label <span class="op">=</span> party_choice.categories.to_list()</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>party_choice_code <span class="op">=</span> party_choice.codes</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># input variables encoding</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>education_code, education_label <span class="op">=</span> data.education.factorize(sort<span class="op">=</span><span class="va">True</span>) </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>nationality_code, nationality_label <span class="op">=</span> data.nationality.factorize(sort<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># setting model coordinates</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'party_choice'</span>: party_choice_label,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'education'</span>: education_label,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nationality'</span>: nationality_label,</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'obs_idx'</span>: data.index} <span class="co"># observation index, the row location of an observation in the dataframe.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below I write a first model using a baseline intercept and I use nationality and education as predictors and baseline offsets. The corresponding coefficients have ‘party choice’ as dimension (11 possibilities) and in the case of education and nationality, have also a dimension of ‘education’ (3 possibilities) and ‘nationality’ (2 possibilities), respectively. These are linearly combined and passed to a softmax function to scale the output to the <span class="math inline">\((0-1)\)</span> interval, as shown below. <span class="math display">\[ p = softmax(α_{baseline} + α_{nationality}[\small{nationality\_category}] + α_{education}[\small{education\_category}]) \]</span></p>
<p>As prior distribution for all three coefficients, instead of using the <span class="math inline">\(\mathcal{Normal}\)</span> distribution, I use below the <span class="math inline">\(\mathcal{Zero-sum\ Normal}\)</span>. This distribution imposes zero sum constraints on specified axes of the fitted coefficients, thereby addressing the problem of overparameterization and identifiability that often plague categorical regression models; a subject of my blog post found <a href="insert link">here</a>.</p>
<p>Finally I use for likelihood the <span class="math inline">\(\mathcal{Categorical}\)</span> distribution, which is a n-dimensional <span class="math inline">\(\mathcal{Bernoulli}\)</span> process, and through which I expose the model to the data.</p>
<div id="b84c6e6d" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_model1(α_sigma<span class="op">=</span><span class="dv">1</span>, α_nat_sigma<span class="op">=</span><span class="dv">1</span>, α_edu_sigma<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model1:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Data containers</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        party_choice_idx <span class="op">=</span> pm.Data(<span class="st">'party_choice_index'</span>, party_choice_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        nationality_idx <span class="op">=</span> pm.Data(<span class="st">'nationality_index'</span>, nationality_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        education_idx <span class="op">=</span> pm.Data(<span class="st">'eductation_index'</span>, education_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Model priors</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># baseline</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        α <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α'</span>, sigma<span class="op">=</span>α_sigma, dims<span class="op">=</span><span class="st">'party_choice'</span>) </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># baseline offset due to nationality</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        α_nationality <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_nationality'</span>, sigma<span class="op">=</span>α_nat_sigma, dims<span class="op">=</span>(<span class="st">'nationality'</span>, <span class="st">'party_choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>) </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># baseline offset due to education</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        α_education <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_education'</span>, sigma<span class="op">=</span>α_edu_sigma, dims<span class="op">=</span>(<span class="st">'education'</span>, <span class="st">'party_choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Link function for choice probability</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> pm.math.softmax(α <span class="op">+</span> α_nationality[nationality_idx] <span class="op">+</span> α_education[education_idx], axis<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Likelihood</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        _ <span class="op">=</span> pm.Categorical(<span class="st">'y'</span>, p<span class="op">=</span>p, observed<span class="op">=</span>party_choice_idx, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> model1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="515219f1" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="op">=</span> build_model1()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below is the model’s diagram with dimension information included.</p>
<div id="8c60f00a" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>model1.to_graphviz()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-26-output-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Next is to sample model priors to see the soundness of assumptions made</p>
<div id="19b6f40f" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> model1:</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    idata1 <span class="op">=</span> pm.sample_prior_predictive(model<span class="op">=</span>model1)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    idata1.extend(pm.sample(chains<span class="op">=</span><span class="dv">4</span>, draws<span class="op">=</span><span class="dv">2000</span>, random_seed<span class="op">=</span><span class="dv">42</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    idata1.extend(pm.sample_posterior_predictive(idata1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y, α, α_education, α_nationality]
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (4 chains in 4 jobs)
NUTS: [α, α_nationality, α_education]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"ba1d691ae31849dfa18da26c897ee048","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 4 chains for 1_000 tune and 2_000 draw iterations (4_000 + 8_000 draws total) took 88 seconds.
Sampling: [y]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"4f0dff72c25d432b9f2435a475b94aac","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div id="f2b8fac9" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_forward_samples(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>        idata: az.InferenceData, categories:<span class="bu">list</span>, categories_name:<span class="bu">str</span>, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), plot_prior<span class="op">=</span><span class="va">True</span>, plot_posterior<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""A quick function to plot model predictives. """</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    f, (left, right) <span class="op">=</span> pp.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>figsize, sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    xticks <span class="op">=</span> [i <span class="op">+</span> <span class="fl">0.5</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(categories))]</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> plot_prior:</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        az.plot_ppc(idata, group<span class="op">=</span><span class="st">"prior"</span>, ax<span class="op">=</span>left)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        left.<span class="bu">set</span>(</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>            xticks<span class="op">=</span>xticks,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>        left.set_xticklabels(categories, fontsize<span class="op">=</span><span class="dv">10</span>, rotation<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>        left.set_xlabel(categories_name, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>        left.legend(frameon<span class="op">=</span><span class="va">True</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>        left.set_visible(<span class="va">False</span>)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> plot_posterior:</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>        az.plot_ppc(idata, ax<span class="op">=</span>right)</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>        right.<span class="bu">set</span>(</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>            xticks<span class="op">=</span>xticks,</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>        right.set_xticklabels(categories, fontsize<span class="op">=</span><span class="dv">10</span>, rotation<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>        right.set_xlabel(categories_name, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>        right.legend(frameon<span class="op">=</span><span class="va">True</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>        right.set_visible(<span class="va">False</span>)</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    f.tight_layout()</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> f, (left, right)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="bb1d962e" class="cell" data-execution_count="29">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mean_win <span class="op">=</span> pd.Series(party_choice_code).value_counts(normalize<span class="op">=</span><span class="va">True</span>).<span class="bu">round</span>(<span class="dv">3</span>).sort_index()</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>f, (axl, axr) <span class="op">=</span> plot_forward_samples(idata1, categories<span class="op">=</span>party_choice_label, categories_name<span class="op">=</span><span class="st">'party choice'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>axl.set_xticklabels(axl.get_xticklabels(), rotation<span class="op">=</span><span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>axl.bar(x<span class="op">=</span>axl.get_xticks(), height<span class="op">=</span>mean_win.values,  color<span class="op">=</span><span class="st">'k'</span>, fill<span class="op">=</span><span class="va">False</span>, lw<span class="op">=</span><span class="dv">3</span>, width<span class="op">=</span><span class="dv">1</span>, zorder<span class="op">=</span><span class="dv">13</span>, label<span class="op">=</span><span class="st">'data'</span>)<span class="op">;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>axr.set_xticklabels(axr.get_xticklabels(), rotation<span class="op">=</span><span class="dv">60</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-29-output-1.png" width="1137" height="604" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Left, in blue lines are sample outcomes for each party choice, before the model has seen the data. Right, model fit results (posterior distribution for each category). The model seems to have learned the posterior distribution well. The model did take some time to fit though and in spite of the lack of difergences, one wonders if sampling could be more efficient. Domain experts have suggested a tighter variance on the coefficient priors could indeed ease sampling. Model1b integrates this domain knowledge as follows:</p>
<div id="9c43c540" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>model1b <span class="op">=</span> build_model1(α_sigma<span class="op">=</span><span class="fl">0.5</span>, α_edu_sigma<span class="op">=</span><span class="fl">0.2</span>, α_nat_sigma<span class="op">=</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="9f26626f" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> model1b:</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    idata1b <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    idata1b.extend(pm.sample(chains<span class="op">=</span><span class="dv">4</span>, draws<span class="op">=</span><span class="dv">2000</span>, random_seed<span class="op">=</span><span class="dv">42</span>))</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    idata1b.extend(pm.sample_posterior_predictive(idata1b))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y, α, α_education, α_nationality]
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (4 chains in 4 jobs)
NUTS: [α, α_nationality, α_education]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"8a8cf629ab994101b03d794eed70a6b0","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 4 chains for 1_000 tune and 2_000 draw iterations (4_000 + 8_000 draws total) took 78 seconds.
Sampling: [y]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"5ef96618f53c4ea78e2f7ca9e12c87ca","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<p>There was some speed improvement (~ 18 seconds on a Macbook air M2.) #### Assessing goodness of fit</p>
<div id="8a4f427f" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>az.plot_trace(idata1, backend_kwargs<span class="op">=</span>{<span class="st">'tight_layout'</span>: <span class="va">True</span>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-32-output-1.png" width="1137" height="561" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="850dd9e3" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>az.plot_trace(idata1b, backend_kwargs<span class="op">=</span><span class="bu">dict</span>(tight_layout<span class="op">=</span><span class="va">True</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-33-output-1.png" width="1137" height="561" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Good mixing in the chains and lack of divergences suggest a good fit. The second model (bottom panel) has tighter posteriors, suggesting a slightly better fit.</p>
<div id="5e263cf9" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1, var_names<span class="op">=</span><span class="st">'α'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[EKRE]</td>
<td>0.906</td>
<td>0.072</td>
<td>0.772</td>
<td>1.042</td>
<td>0.001</td>
<td>0.001</td>
<td>6612.0</td>
<td>6756.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Eesti 200]</td>
<td>0.377</td>
<td>0.087</td>
<td>0.222</td>
<td>0.549</td>
<td>0.001</td>
<td>0.001</td>
<td>6715.0</td>
<td>6112.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Undecided]</td>
<td>1.153</td>
<td>0.067</td>
<td>1.021</td>
<td>1.277</td>
<td>0.001</td>
<td>0.001</td>
<td>6441.0</td>
<td>6223.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Isamaa]</td>
<td>-0.710</td>
<td>0.160</td>
<td>-1.000</td>
<td>-0.405</td>
<td>0.002</td>
<td>0.001</td>
<td>8356.0</td>
<td>6113.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Keskerakond]</td>
<td>1.302</td>
<td>0.063</td>
<td>1.178</td>
<td>1.415</td>
<td>0.001</td>
<td>0.001</td>
<td>6106.0</td>
<td>6320.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Mitte ükski erakond]</td>
<td>1.599</td>
<td>0.059</td>
<td>1.486</td>
<td>1.709</td>
<td>0.001</td>
<td>0.001</td>
<td>5842.0</td>
<td>5910.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Other]</td>
<td>-1.575</td>
<td>0.180</td>
<td>-1.900</td>
<td>-1.225</td>
<td>0.002</td>
<td>0.001</td>
<td>10091.0</td>
<td>6406.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Parempoolsed]</td>
<td>-2.961</td>
<td>0.326</td>
<td>-3.584</td>
<td>-2.365</td>
<td>0.004</td>
<td>0.003</td>
<td>5747.0</td>
<td>6096.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Reformierakond]</td>
<td>0.716</td>
<td>0.084</td>
<td>0.552</td>
<td>0.865</td>
<td>0.001</td>
<td>0.001</td>
<td>8024.0</td>
<td>6563.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Rohelised]</td>
<td>-1.054</td>
<td>0.156</td>
<td>-1.340</td>
<td>-0.752</td>
<td>0.002</td>
<td>0.001</td>
<td>8262.0</td>
<td>6252.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[SDE]</td>
<td>0.246</td>
<td>0.093</td>
<td>0.072</td>
<td>0.419</td>
<td>0.001</td>
<td>0.001</td>
<td>11979.0</td>
<td>6935.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="0359d138" class="cell" data-execution_count="35">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1b, var_names<span class="op">=</span><span class="st">'α'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[EKRE]</td>
<td>0.781</td>
<td>0.064</td>
<td>0.660</td>
<td>0.899</td>
<td>0.001</td>
<td>0.000</td>
<td>12336.0</td>
<td>6688.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Eesti 200]</td>
<td>0.320</td>
<td>0.073</td>
<td>0.176</td>
<td>0.452</td>
<td>0.001</td>
<td>0.001</td>
<td>10479.0</td>
<td>6316.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Undecided]</td>
<td>1.020</td>
<td>0.058</td>
<td>0.907</td>
<td>1.126</td>
<td>0.001</td>
<td>0.000</td>
<td>10735.0</td>
<td>6572.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Isamaa]</td>
<td>-0.509</td>
<td>0.109</td>
<td>-0.723</td>
<td>-0.310</td>
<td>0.001</td>
<td>0.001</td>
<td>10705.0</td>
<td>5825.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Keskerakond]</td>
<td>1.155</td>
<td>0.055</td>
<td>1.049</td>
<td>1.253</td>
<td>0.001</td>
<td>0.000</td>
<td>10455.0</td>
<td>6907.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Mitte ükski erakond]</td>
<td>1.464</td>
<td>0.051</td>
<td>1.370</td>
<td>1.563</td>
<td>0.001</td>
<td>0.000</td>
<td>9276.0</td>
<td>6427.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Other]</td>
<td>-1.609</td>
<td>0.147</td>
<td>-1.889</td>
<td>-1.333</td>
<td>0.001</td>
<td>0.001</td>
<td>12469.0</td>
<td>6006.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Parempoolsed]</td>
<td>-2.461</td>
<td>0.202</td>
<td>-2.849</td>
<td>-2.089</td>
<td>0.002</td>
<td>0.001</td>
<td>10961.0</td>
<td>5924.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[Reformierakond]</td>
<td>0.698</td>
<td>0.071</td>
<td>0.563</td>
<td>0.830</td>
<td>0.001</td>
<td>0.000</td>
<td>10962.0</td>
<td>6083.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α[Rohelised]</td>
<td>-1.065</td>
<td>0.121</td>
<td>-1.295</td>
<td>-0.843</td>
<td>0.001</td>
<td>0.001</td>
<td>10573.0</td>
<td>6503.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α[SDE]</td>
<td>0.205</td>
<td>0.075</td>
<td>0.073</td>
<td>0.357</td>
<td>0.001</td>
<td>0.001</td>
<td>11252.0</td>
<td>6818.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Looking at the model fit summary tables for the baseline <span class="math inline">\(α\)</span> parameter, in both cases the <span class="math inline">\(\hat{R}\)</span> (aka <em>Gelman-Rubin</em> statistic) is 1.0. This indicates good convergence of MCMC chains (I fired up 4 of them for sampling). Interestingly however, in the case of the second model with tighter variance constraints on the priors, the <em>Effective Sample Size</em> corresponding to the sampling of the central portion of the posterior (ess_bulk) shows more efficient sampling in most cases. The posterior is therefore likelier to be better characterized. A similar pattern can be observed in the next 4 tables for <span class="math inline">\(α_{nationality}\)</span> and <span class="math inline">\(α_{education}\)</span>. Note that in contrast, the tails of the posterior are sampled with similar efficiency in both cases, as noted by ess_tail.</p>
<div id="bca39594" class="cell" data-execution_count="36">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1, var_names<span class="op">=</span><span class="st">'α_education'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, EKRE]</td>
<td>0.234</td>
<td>0.088</td>
<td>0.072</td>
<td>0.400</td>
<td>0.001</td>
<td>0.001</td>
<td>8337.0</td>
<td>6406.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Eesti 200]</td>
<td>-0.359</td>
<td>0.125</td>
<td>-0.602</td>
<td>-0.134</td>
<td>0.001</td>
<td>0.001</td>
<td>8978.0</td>
<td>6077.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Undecided]</td>
<td>0.110</td>
<td>0.091</td>
<td>-0.052</td>
<td>0.290</td>
<td>0.001</td>
<td>0.001</td>
<td>8579.0</td>
<td>6639.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Isamaa]</td>
<td>-0.110</td>
<td>0.129</td>
<td>-0.352</td>
<td>0.129</td>
<td>0.001</td>
<td>0.001</td>
<td>12807.0</td>
<td>6272.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Keskerakond]</td>
<td>0.385</td>
<td>0.091</td>
<td>0.212</td>
<td>0.555</td>
<td>0.001</td>
<td>0.001</td>
<td>7640.0</td>
<td>6648.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Mitte ükski erakond]</td>
<td>0.226</td>
<td>0.082</td>
<td>0.067</td>
<td>0.376</td>
<td>0.001</td>
<td>0.001</td>
<td>6905.0</td>
<td>6441.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Other]</td>
<td>0.148</td>
<td>0.276</td>
<td>-0.357</td>
<td>0.665</td>
<td>0.003</td>
<td>0.003</td>
<td>9166.0</td>
<td>5883.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Parempoolsed]</td>
<td>0.332</td>
<td>0.382</td>
<td>-0.402</td>
<td>1.037</td>
<td>0.004</td>
<td>0.003</td>
<td>9250.0</td>
<td>6320.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Reformierakond]</td>
<td>-0.486</td>
<td>0.092</td>
<td>-0.658</td>
<td>-0.317</td>
<td>0.001</td>
<td>0.001</td>
<td>9580.0</td>
<td>6485.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Rohelised]</td>
<td>-0.054</td>
<td>0.205</td>
<td>-0.446</td>
<td>0.317</td>
<td>0.002</td>
<td>0.002</td>
<td>10698.0</td>
<td>6133.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, SDE]</td>
<td>-0.426</td>
<td>0.144</td>
<td>-0.696</td>
<td>-0.155</td>
<td>0.001</td>
<td>0.001</td>
<td>11192.0</td>
<td>6408.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, EKRE]</td>
<td>-0.399</td>
<td>0.072</td>
<td>-0.530</td>
<td>-0.259</td>
<td>0.001</td>
<td>0.001</td>
<td>8977.0</td>
<td>6374.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Eesti 200]</td>
<td>0.348</td>
<td>0.084</td>
<td>0.200</td>
<td>0.515</td>
<td>0.001</td>
<td>0.001</td>
<td>8692.0</td>
<td>5956.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Undecided]</td>
<td>-0.216</td>
<td>0.071</td>
<td>-0.343</td>
<td>-0.075</td>
<td>0.001</td>
<td>0.001</td>
<td>8929.0</td>
<td>6048.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Isamaa]</td>
<td>-0.110</td>
<td>0.098</td>
<td>-0.292</td>
<td>0.076</td>
<td>0.001</td>
<td>0.001</td>
<td>13473.0</td>
<td>6687.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Keskerakond]</td>
<td>-0.347</td>
<td>0.072</td>
<td>-0.481</td>
<td>-0.212</td>
<td>0.001</td>
<td>0.001</td>
<td>8540.0</td>
<td>6733.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Mitte ükski erakond]</td>
<td>-0.278</td>
<td>0.064</td>
<td>-0.395</td>
<td>-0.158</td>
<td>0.001</td>
<td>0.001</td>
<td>7817.0</td>
<td>6747.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Other]</td>
<td>-0.259</td>
<td>0.219</td>
<td>-0.655</td>
<td>0.164</td>
<td>0.002</td>
<td>0.002</td>
<td>10544.0</td>
<td>6202.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Parempoolsed]</td>
<td>0.414</td>
<td>0.304</td>
<td>-0.160</td>
<td>0.981</td>
<td>0.003</td>
<td>0.003</td>
<td>8511.0</td>
<td>6058.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Reformierakond]</td>
<td>0.397</td>
<td>0.064</td>
<td>0.279</td>
<td>0.516</td>
<td>0.001</td>
<td>0.000</td>
<td>8557.0</td>
<td>6525.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Rohelised]</td>
<td>0.021</td>
<td>0.152</td>
<td>-0.253</td>
<td>0.314</td>
<td>0.001</td>
<td>0.002</td>
<td>11264.0</td>
<td>5934.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, SDE]</td>
<td>0.428</td>
<td>0.094</td>
<td>0.258</td>
<td>0.610</td>
<td>0.001</td>
<td>0.001</td>
<td>11307.0</td>
<td>6711.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, EKRE]</td>
<td>0.164</td>
<td>0.067</td>
<td>0.039</td>
<td>0.290</td>
<td>0.001</td>
<td>0.000</td>
<td>9386.0</td>
<td>6782.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Eesti 200]</td>
<td>0.011</td>
<td>0.085</td>
<td>-0.150</td>
<td>0.169</td>
<td>0.001</td>
<td>0.001</td>
<td>11057.0</td>
<td>6734.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Undecided]</td>
<td>0.106</td>
<td>0.069</td>
<td>-0.025</td>
<td>0.234</td>
<td>0.001</td>
<td>0.001</td>
<td>10110.0</td>
<td>6960.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Isamaa]</td>
<td>0.220</td>
<td>0.092</td>
<td>0.041</td>
<td>0.388</td>
<td>0.001</td>
<td>0.001</td>
<td>13016.0</td>
<td>6300.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Keskerakond]</td>
<td>-0.038</td>
<td>0.070</td>
<td>-0.167</td>
<td>0.094</td>
<td>0.001</td>
<td>0.001</td>
<td>10080.0</td>
<td>6738.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Mitte ükski erakond]</td>
<td>0.052</td>
<td>0.062</td>
<td>-0.063</td>
<td>0.170</td>
<td>0.001</td>
<td>0.001</td>
<td>9273.0</td>
<td>6817.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Other]</td>
<td>0.111</td>
<td>0.201</td>
<td>-0.277</td>
<td>0.476</td>
<td>0.002</td>
<td>0.002</td>
<td>11753.0</td>
<td>6409.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Parempoolsed]</td>
<td>-0.745</td>
<td>0.350</td>
<td>-1.389</td>
<td>-0.074</td>
<td>0.004</td>
<td>0.003</td>
<td>9203.0</td>
<td>6561.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Reformierakond]</td>
<td>0.088</td>
<td>0.065</td>
<td>-0.038</td>
<td>0.207</td>
<td>0.001</td>
<td>0.001</td>
<td>9345.0</td>
<td>7035.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Rohelised]</td>
<td>0.033</td>
<td>0.144</td>
<td>-0.235</td>
<td>0.302</td>
<td>0.001</td>
<td>0.002</td>
<td>15300.0</td>
<td>6318.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, SDE]</td>
<td>-0.002</td>
<td>0.097</td>
<td>-0.187</td>
<td>0.176</td>
<td>0.001</td>
<td>0.001</td>
<td>9201.0</td>
<td>7201.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="c3454253" class="cell" data-execution_count="37">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1b, var_names<span class="op">=</span><span class="st">'α_education'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, EKRE]</td>
<td>0.191</td>
<td>0.070</td>
<td>0.055</td>
<td>0.320</td>
<td>0.001</td>
<td>0.000</td>
<td>13539.0</td>
<td>6375.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Eesti 200]</td>
<td>-0.235</td>
<td>0.090</td>
<td>-0.400</td>
<td>-0.062</td>
<td>0.001</td>
<td>0.001</td>
<td>11990.0</td>
<td>7072.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Undecided]</td>
<td>0.083</td>
<td>0.073</td>
<td>-0.060</td>
<td>0.214</td>
<td>0.001</td>
<td>0.001</td>
<td>12012.0</td>
<td>6297.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Isamaa]</td>
<td>-0.050</td>
<td>0.093</td>
<td>-0.231</td>
<td>0.118</td>
<td>0.001</td>
<td>0.001</td>
<td>13607.0</td>
<td>6170.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Keskerakond]</td>
<td>0.295</td>
<td>0.074</td>
<td>0.156</td>
<td>0.434</td>
<td>0.001</td>
<td>0.000</td>
<td>12671.0</td>
<td>6260.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Mitte ükski erakond]</td>
<td>0.189</td>
<td>0.066</td>
<td>0.060</td>
<td>0.309</td>
<td>0.001</td>
<td>0.000</td>
<td>12424.0</td>
<td>6586.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Other]</td>
<td>0.065</td>
<td>0.135</td>
<td>-0.184</td>
<td>0.323</td>
<td>0.001</td>
<td>0.001</td>
<td>13651.0</td>
<td>6458.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Parempoolsed]</td>
<td>0.097</td>
<td>0.144</td>
<td>-0.174</td>
<td>0.365</td>
<td>0.001</td>
<td>0.001</td>
<td>13581.0</td>
<td>5944.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Reformierakond]</td>
<td>-0.393</td>
<td>0.070</td>
<td>-0.517</td>
<td>-0.256</td>
<td>0.001</td>
<td>0.000</td>
<td>11899.0</td>
<td>6095.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Rohelised]</td>
<td>0.009</td>
<td>0.122</td>
<td>-0.223</td>
<td>0.228</td>
<td>0.001</td>
<td>0.001</td>
<td>13491.0</td>
<td>6665.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, SDE]</td>
<td>-0.251</td>
<td>0.097</td>
<td>-0.426</td>
<td>-0.063</td>
<td>0.001</td>
<td>0.001</td>
<td>11271.0</td>
<td>6692.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, EKRE]</td>
<td>-0.318</td>
<td>0.059</td>
<td>-0.430</td>
<td>-0.208</td>
<td>0.000</td>
<td>0.000</td>
<td>14386.0</td>
<td>6470.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Eesti 200]</td>
<td>0.297</td>
<td>0.065</td>
<td>0.177</td>
<td>0.419</td>
<td>0.001</td>
<td>0.000</td>
<td>12723.0</td>
<td>5482.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Undecided]</td>
<td>-0.155</td>
<td>0.057</td>
<td>-0.261</td>
<td>-0.047</td>
<td>0.001</td>
<td>0.000</td>
<td>10573.0</td>
<td>6068.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Isamaa]</td>
<td>-0.091</td>
<td>0.076</td>
<td>-0.235</td>
<td>0.051</td>
<td>0.001</td>
<td>0.001</td>
<td>14480.0</td>
<td>6157.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Keskerakond]</td>
<td>-0.249</td>
<td>0.060</td>
<td>-0.367</td>
<td>-0.139</td>
<td>0.001</td>
<td>0.000</td>
<td>12318.0</td>
<td>6111.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Mitte ükski erakond]</td>
<td>-0.214</td>
<td>0.053</td>
<td>-0.316</td>
<td>-0.116</td>
<td>0.000</td>
<td>0.000</td>
<td>11808.0</td>
<td>6247.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Other]</td>
<td>-0.080</td>
<td>0.121</td>
<td>-0.308</td>
<td>0.149</td>
<td>0.001</td>
<td>0.001</td>
<td>15069.0</td>
<td>6587.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Parempoolsed]</td>
<td>0.080</td>
<td>0.137</td>
<td>-0.178</td>
<td>0.335</td>
<td>0.001</td>
<td>0.001</td>
<td>12957.0</td>
<td>6326.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Reformierakond]</td>
<td>0.373</td>
<td>0.050</td>
<td>0.276</td>
<td>0.462</td>
<td>0.000</td>
<td>0.000</td>
<td>11685.0</td>
<td>6693.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Rohelised]</td>
<td>0.014</td>
<td>0.105</td>
<td>-0.181</td>
<td>0.212</td>
<td>0.001</td>
<td>0.001</td>
<td>16191.0</td>
<td>6541.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, SDE]</td>
<td>0.344</td>
<td>0.071</td>
<td>0.214</td>
<td>0.479</td>
<td>0.001</td>
<td>0.000</td>
<td>10646.0</td>
<td>5829.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, EKRE]</td>
<td>0.127</td>
<td>0.053</td>
<td>0.031</td>
<td>0.229</td>
<td>0.000</td>
<td>0.000</td>
<td>12694.0</td>
<td>6755.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Eesti 200]</td>
<td>-0.062</td>
<td>0.065</td>
<td>-0.185</td>
<td>0.060</td>
<td>0.001</td>
<td>0.001</td>
<td>11771.0</td>
<td>6722.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Undecided]</td>
<td>0.072</td>
<td>0.054</td>
<td>-0.027</td>
<td>0.177</td>
<td>0.000</td>
<td>0.000</td>
<td>12113.0</td>
<td>7153.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Isamaa]</td>
<td>0.140</td>
<td>0.072</td>
<td>0.007</td>
<td>0.277</td>
<td>0.001</td>
<td>0.000</td>
<td>14944.0</td>
<td>6205.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Keskerakond]</td>
<td>-0.046</td>
<td>0.055</td>
<td>-0.144</td>
<td>0.062</td>
<td>0.000</td>
<td>0.000</td>
<td>12197.0</td>
<td>6874.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Mitte ükski erakond]</td>
<td>0.025</td>
<td>0.049</td>
<td>-0.068</td>
<td>0.115</td>
<td>0.000</td>
<td>0.000</td>
<td>12274.0</td>
<td>6695.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Other]</td>
<td>0.015</td>
<td>0.119</td>
<td>-0.205</td>
<td>0.239</td>
<td>0.001</td>
<td>0.001</td>
<td>14454.0</td>
<td>6886.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Parempoolsed]</td>
<td>-0.177</td>
<td>0.136</td>
<td>-0.437</td>
<td>0.075</td>
<td>0.001</td>
<td>0.001</td>
<td>14120.0</td>
<td>6326.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Reformierakond]</td>
<td>0.020</td>
<td>0.050</td>
<td>-0.073</td>
<td>0.112</td>
<td>0.000</td>
<td>0.000</td>
<td>12133.0</td>
<td>7066.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Rohelised]</td>
<td>-0.023</td>
<td>0.100</td>
<td>-0.209</td>
<td>0.162</td>
<td>0.001</td>
<td>0.001</td>
<td>13259.0</td>
<td>5827.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, SDE]</td>
<td>-0.092</td>
<td>0.070</td>
<td>-0.223</td>
<td>0.041</td>
<td>0.001</td>
<td>0.001</td>
<td>11114.0</td>
<td>6683.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ff623ad2" class="cell" data-execution_count="38">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1, var_names<span class="op">=</span><span class="st">'α_nationality'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, EKRE]</td>
<td>0.091</td>
<td>0.064</td>
<td>-0.031</td>
<td>0.210</td>
<td>0.001</td>
<td>0.001</td>
<td>7281.0</td>
<td>6421.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Eesti 200]</td>
<td>0.081</td>
<td>0.072</td>
<td>-0.059</td>
<td>0.213</td>
<td>0.001</td>
<td>0.001</td>
<td>8736.0</td>
<td>6470.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Undecided]</td>
<td>-0.287</td>
<td>0.058</td>
<td>-0.394</td>
<td>-0.182</td>
<td>0.001</td>
<td>0.001</td>
<td>6742.0</td>
<td>6367.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Isamaa]</td>
<td>0.935</td>
<td>0.151</td>
<td>0.660</td>
<td>1.228</td>
<td>0.002</td>
<td>0.001</td>
<td>8963.0</td>
<td>5827.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Keskerakond]</td>
<td>-0.791</td>
<td>0.056</td>
<td>-0.888</td>
<td>-0.677</td>
<td>0.001</td>
<td>0.000</td>
<td>6695.0</td>
<td>6262.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Mitte ükski erakond]</td>
<td>-0.422</td>
<td>0.052</td>
<td>-0.520</td>
<td>-0.327</td>
<td>0.001</td>
<td>0.000</td>
<td>6279.0</td>
<td>6162.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Other]</td>
<td>-0.407</td>
<td>0.155</td>
<td>-0.703</td>
<td>-0.120</td>
<td>0.001</td>
<td>0.001</td>
<td>12316.0</td>
<td>6225.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Parempoolsed]</td>
<td>0.095</td>
<td>0.292</td>
<td>-0.427</td>
<td>0.655</td>
<td>0.004</td>
<td>0.003</td>
<td>5923.0</td>
<td>5253.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Reformierakond]</td>
<td>0.780</td>
<td>0.076</td>
<td>0.639</td>
<td>0.921</td>
<td>0.001</td>
<td>0.001</td>
<td>8745.0</td>
<td>6390.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Rohelised]</td>
<td>0.039</td>
<td>0.135</td>
<td>-0.209</td>
<td>0.290</td>
<td>0.001</td>
<td>0.001</td>
<td>10870.0</td>
<td>6037.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, SDE]</td>
<td>-0.113</td>
<td>0.070</td>
<td>-0.236</td>
<td>0.024</td>
<td>0.001</td>
<td>0.001</td>
<td>10342.0</td>
<td>6071.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, EKRE]</td>
<td>-0.091</td>
<td>0.064</td>
<td>-0.210</td>
<td>0.031</td>
<td>0.001</td>
<td>0.001</td>
<td>7281.0</td>
<td>6421.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Eesti 200]</td>
<td>-0.081</td>
<td>0.072</td>
<td>-0.213</td>
<td>0.059</td>
<td>0.001</td>
<td>0.001</td>
<td>8736.0</td>
<td>6470.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Undecided]</td>
<td>0.287</td>
<td>0.058</td>
<td>0.182</td>
<td>0.394</td>
<td>0.001</td>
<td>0.001</td>
<td>6742.0</td>
<td>6367.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Isamaa]</td>
<td>-0.935</td>
<td>0.151</td>
<td>-1.228</td>
<td>-0.660</td>
<td>0.002</td>
<td>0.001</td>
<td>8963.0</td>
<td>5827.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Keskerakond]</td>
<td>0.791</td>
<td>0.056</td>
<td>0.677</td>
<td>0.888</td>
<td>0.001</td>
<td>0.000</td>
<td>6695.0</td>
<td>6262.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Mitte ükski erakond]</td>
<td>0.422</td>
<td>0.052</td>
<td>0.327</td>
<td>0.520</td>
<td>0.001</td>
<td>0.000</td>
<td>6279.0</td>
<td>6162.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Other]</td>
<td>0.407</td>
<td>0.155</td>
<td>0.120</td>
<td>0.703</td>
<td>0.001</td>
<td>0.001</td>
<td>12316.0</td>
<td>6225.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Parempoolsed]</td>
<td>-0.095</td>
<td>0.292</td>
<td>-0.655</td>
<td>0.427</td>
<td>0.004</td>
<td>0.003</td>
<td>5923.0</td>
<td>5253.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Reformierakond]</td>
<td>-0.780</td>
<td>0.076</td>
<td>-0.921</td>
<td>-0.639</td>
<td>0.001</td>
<td>0.001</td>
<td>8745.0</td>
<td>6390.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Rohelised]</td>
<td>-0.039</td>
<td>0.135</td>
<td>-0.290</td>
<td>0.209</td>
<td>0.001</td>
<td>0.001</td>
<td>10870.0</td>
<td>6037.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, SDE]</td>
<td>0.113</td>
<td>0.070</td>
<td>-0.024</td>
<td>0.236</td>
<td>0.001</td>
<td>0.001</td>
<td>10342.0</td>
<td>6071.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="718e0871" class="cell" data-execution_count="39">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata1b, var_names<span class="op">=</span><span class="st">'α_nationality'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="38">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, EKRE]</td>
<td>0.144</td>
<td>0.057</td>
<td>0.039</td>
<td>0.251</td>
<td>0.001</td>
<td>0.000</td>
<td>12637.0</td>
<td>6667.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Eesti 200]</td>
<td>0.112</td>
<td>0.062</td>
<td>-0.006</td>
<td>0.229</td>
<td>0.001</td>
<td>0.000</td>
<td>11945.0</td>
<td>6603.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Undecided]</td>
<td>-0.223</td>
<td>0.049</td>
<td>-0.315</td>
<td>-0.136</td>
<td>0.000</td>
<td>0.000</td>
<td>11503.0</td>
<td>7039.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Isamaa]</td>
<td>0.669</td>
<td>0.101</td>
<td>0.476</td>
<td>0.854</td>
<td>0.001</td>
<td>0.001</td>
<td>11064.0</td>
<td>6258.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Keskerakond]</td>
<td>-0.707</td>
<td>0.046</td>
<td>-0.795</td>
<td>-0.621</td>
<td>0.000</td>
<td>0.000</td>
<td>11305.0</td>
<td>6511.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Mitte ükski erakond]</td>
<td>-0.357</td>
<td>0.043</td>
<td>-0.439</td>
<td>-0.277</td>
<td>0.000</td>
<td>0.000</td>
<td>10679.0</td>
<td>6792.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Other]</td>
<td>-0.260</td>
<td>0.121</td>
<td>-0.489</td>
<td>-0.035</td>
<td>0.001</td>
<td>0.001</td>
<td>12611.0</td>
<td>6075.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Parempoolsed]</td>
<td>-0.091</td>
<td>0.153</td>
<td>-0.378</td>
<td>0.192</td>
<td>0.001</td>
<td>0.001</td>
<td>11387.0</td>
<td>6724.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Reformierakond]</td>
<td>0.758</td>
<td>0.065</td>
<td>0.630</td>
<td>0.875</td>
<td>0.001</td>
<td>0.000</td>
<td>12215.0</td>
<td>6441.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Rohelised]</td>
<td>0.026</td>
<td>0.105</td>
<td>-0.156</td>
<td>0.236</td>
<td>0.001</td>
<td>0.001</td>
<td>12021.0</td>
<td>6444.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, SDE]</td>
<td>-0.071</td>
<td>0.062</td>
<td>-0.186</td>
<td>0.043</td>
<td>0.001</td>
<td>0.000</td>
<td>11030.0</td>
<td>6307.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, EKRE]</td>
<td>-0.144</td>
<td>0.057</td>
<td>-0.251</td>
<td>-0.039</td>
<td>0.001</td>
<td>0.000</td>
<td>12637.0</td>
<td>6667.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Eesti 200]</td>
<td>-0.112</td>
<td>0.062</td>
<td>-0.229</td>
<td>0.006</td>
<td>0.001</td>
<td>0.000</td>
<td>11945.0</td>
<td>6603.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Undecided]</td>
<td>0.223</td>
<td>0.049</td>
<td>0.136</td>
<td>0.315</td>
<td>0.000</td>
<td>0.000</td>
<td>11503.0</td>
<td>7039.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Isamaa]</td>
<td>-0.669</td>
<td>0.101</td>
<td>-0.854</td>
<td>-0.476</td>
<td>0.001</td>
<td>0.001</td>
<td>11064.0</td>
<td>6258.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Keskerakond]</td>
<td>0.707</td>
<td>0.046</td>
<td>0.621</td>
<td>0.795</td>
<td>0.000</td>
<td>0.000</td>
<td>11305.0</td>
<td>6511.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Mitte ükski erakond]</td>
<td>0.357</td>
<td>0.043</td>
<td>0.277</td>
<td>0.439</td>
<td>0.000</td>
<td>0.000</td>
<td>10679.0</td>
<td>6792.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Other]</td>
<td>0.260</td>
<td>0.121</td>
<td>0.035</td>
<td>0.489</td>
<td>0.001</td>
<td>0.001</td>
<td>12611.0</td>
<td>6075.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Parempoolsed]</td>
<td>0.091</td>
<td>0.153</td>
<td>-0.192</td>
<td>0.378</td>
<td>0.001</td>
<td>0.001</td>
<td>11387.0</td>
<td>6724.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Reformierakond]</td>
<td>-0.758</td>
<td>0.065</td>
<td>-0.875</td>
<td>-0.630</td>
<td>0.001</td>
<td>0.000</td>
<td>12215.0</td>
<td>6441.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Rohelised]</td>
<td>-0.026</td>
<td>0.105</td>
<td>-0.236</td>
<td>0.156</td>
<td>0.001</td>
<td>0.001</td>
<td>12021.0</td>
<td>6444.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, SDE]</td>
<td>0.071</td>
<td>0.062</td>
<td>-0.043</td>
<td>0.186</td>
<td>0.001</td>
<td>0.000</td>
<td>11030.0</td>
<td>6307.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Given the above, I hereafter drop the first model with the more naive priors and continue with the second model with the more informative priors.</p>
<p>Now to check the impact of each predictor on voter preference by examining the posterior distribution, its central tendency and spread and how it relates to the reference value of 0, which corresponds to to effect. Note that: * The orange number situates probabilistically the reference value (0=neither favorable nor unfavorable.) * The black line corresponds to the 94% Highest Density Interval (HDI) - the narrowest interval containing 94% of the posterior distribution. * The choice of 94% is a reminder that there is nothing magical about this number. Analysts should determine the appropriate size of the credibility interval that works best for their use case.<br>
* This corresponds to a proabilistic statement; i.e.&nbsp;there is a 94% chance that given this data and this model, a voter correponding to this category would have an an offset within the HDI.</p>
<ol type="1">
<li>Baseline - average voter tendencies
<ul>
<li>On average there is a overwhelmingly positive outlook on EKRE, Eesti, Mitte, Reformierakond, and to a lesser extent, SDE. The average voter has also a high probability of being Undecided.</li>
<li>On the other hand, Isamaa, Parempoolsed, Rohelised and smaller parties grouped under the catch-all Other are not likely to be appealing to the average voter.</li>
</ul></li>
</ol>
<div id="47e5f6fa" class="cell" data-execution_count="40">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>az.plot_posterior(idata1b, var_names<span class="op">=</span><span class="st">'α'</span>, ref_val<span class="op">=</span><span class="dv">0</span>, textsize<span class="op">=</span><span class="dv">16</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-40-output-1.png" width="1874" height="1800" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Education:
<ul>
<li>Basic Education:
<ul>
<li>There is a very high probability that a voter belonging ot this category will be in favor of EKRE, Keskerakond, or Mitte</li>
<li>There is a very high probability against such a voter favoring Reformierakond, and to a lesser extent, SDE.</li>
</ul></li>
<li>Secondary Education:
<ul>
<li>Voter have high probability of favoring EKRE and to a lesser extent Isamaa</li>
<li>Though not quite significant, voter are likely to be most hostile to SDE.</li>
</ul></li>
<li>Higher Education:
<ul>
<li>Voters in this category are very hostile to EKRE, Mitte and Keskerakond and are unlikely to be undecided</li>
<li>Voters are quite sympathetic to Eesti and Reformierakond.</li>
</ul></li>
</ul></li>
</ol>
<div id="1e93deed" class="cell" data-execution_count="41">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>az.plot_posterior(idata1b, var_names<span class="op">=</span><span class="st">'α_education'</span>, ref_val<span class="op">=</span><span class="dv">0</span>, backend_kwargs<span class="op">=</span><span class="bu">dict</span>(tight_layout<span class="op">=</span><span class="va">True</span>), textsize<span class="op">=</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-41-output-1.png" width="2303" height="6057" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Nationality</li>
</ol>
<ul>
<li>Estonians are:
<ul>
<li>predominantly favorable to EKRE, Isamaa, Reformierakond;</li>
<li>largely unfavorable to Keskerakond and Mitte, and are less likely to be Undecided.</li>
</ul></li>
<li>Ethnic Russians (Other) on the other hand:
<ul>
<li>favor Keskerakond, Mitte, and are more likely to be Undecided;</li>
<li>are hostile to Reformierakond and to a lesser extent EKRE.</li>
</ul></li>
</ul>
<div id="032cd5ef" class="cell" data-execution_count="42">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>f, axs <span class="op">=</span> pp.subplots(ncols<span class="op">=</span><span class="dv">3</span>, nrows<span class="op">=</span><span class="dv">8</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">40</span>))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axs.ravel()[<span class="op">-</span><span class="dv">2</span>:]:</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    ax.set_visible(<span class="va">False</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>az.plot_posterior(idata1b, var_names<span class="op">=</span><span class="st">'α_nationality'</span>, backend_kwargs<span class="op">=</span><span class="bu">dict</span>(tight_layout<span class="op">=</span><span class="va">True</span>), ref_val<span class="op">=</span><span class="dv">0</span>, ax<span class="op">=</span>axs, textsize<span class="op">=</span><span class="dv">10</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-42-output-1.png" width="1158" height="3032" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="adding-gender-and-age-group" class="level4">
<h4 class="anchored" data-anchor-id="adding-gender-and-age-group">Adding gender and age group</h4>
<p>In accordance with the Bayesian workflow, the next step is to build a slightly more complex model, in this case by adding gender and vote age group as predictors to nationality and education, and see if can extract further insight. The model type is the same, just with a total of 4 offsets to the baseline instead of 2. I will also use stronger informative priors as I did in the second model that I ended up using for my analysis. Finally, the prior distribution for all coefficients is again the ZeroSumNormal distribution that I use to avoid non-identifiability due to overparameterization. But first, to encode the additional predictors…</p>
<div id="3db1faa4" class="cell" data-execution_count="43">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>gender_code, gender_label <span class="op">=</span> data.gender.factorize(sort<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>age_gp_code, age_group_label <span class="op">=</span> data.age_group.factorize(sort<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="ad71c4e8" class="cell" data-execution_count="44">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> {</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'age group'</span>: age_group_label,</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'education'</span>: education_label,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gender'</span>: gender_label,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nationality'</span>: nationality_label,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'party choice'</span>: party_choice_label,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'obs_idx'</span>: data.index</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="60b51ad0" class="cell" data-execution_count="45">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_model2(coords, σ_baseline<span class="op">=</span><span class="dv">1</span>, σ_age<span class="op">=</span><span class="dv">1</span>, σ_edu<span class="op">=</span><span class="dv">1</span>, σ_gen<span class="op">=</span><span class="dv">1</span>, σ_nat<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pm.Model(coords<span class="op">=</span>coords) <span class="im">as</span> model2:</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>        age_gp_idx <span class="op">=</span> pm.Data(<span class="st">'age_gp'</span>, age_gp_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>        educ_idx <span class="op">=</span> pm.Data(<span class="st">'education'</span>, education_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        gender_idx <span class="op">=</span> pm.Data(<span class="st">'gender'</span>, gender_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        nat_idx <span class="op">=</span> pm.Data(<span class="st">'nationality'</span>, nationality_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>        party_choice_idx <span class="op">=</span> pm.Data(<span class="st">'party choice'</span>, party_choice_code, dims<span class="op">=</span><span class="st">'obs_idx'</span>) </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>        α_baseline <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_baseline'</span>, sigma<span class="op">=</span>σ_baseline, dims<span class="op">=</span><span class="st">'party choice'</span>)</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>        α_age_group <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_age_group'</span>, sigma<span class="op">=</span>σ_age, dims<span class="op">=</span>(<span class="st">'age group'</span>, <span class="st">'party choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>        α_education <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_education'</span>, sigma<span class="op">=</span>σ_edu, dims<span class="op">=</span>(<span class="st">'education'</span>, <span class="st">'party choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>        α_gender <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_gender'</span>, sigma<span class="op">=</span>σ_gen, dims<span class="op">=</span>(<span class="st">'gender'</span>, <span class="st">'party choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>        α_nationality <span class="op">=</span> pm.ZeroSumNormal(<span class="st">'α_nationality'</span>, sigma<span class="op">=</span>σ_nat, dims<span class="op">=</span>(<span class="st">'nationality'</span>, <span class="st">'party choice'</span>), n_zerosum_axes<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>        μ <span class="op">=</span> α_baseline <span class="op">+</span> α_age_group[age_gp_idx] <span class="op">+</span> α_education[educ_idx] <span class="op">+</span> α_gender[gender_idx] <span class="op">+</span> α_nationality[nat_idx]</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> pm.math.softmax(μ, axis<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>        _ <span class="op">=</span> pm.Categorical(<span class="st">'y'</span>, p<span class="op">=</span>p, observed<span class="op">=</span>party_choice_idx, dims<span class="op">=</span><span class="st">'obs_idx'</span>)</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> model2</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>model2 <span class="op">=</span> build_model2(coords<span class="op">=</span>coords, σ_baseline<span class="op">=</span><span class="fl">0.3</span>, σ_age<span class="op">=</span><span class="fl">0.4</span>, σ_edu<span class="op">=</span><span class="fl">0.3</span>, σ_gen<span class="op">=</span><span class="fl">0.2</span>, σ_nat<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>model2.to_graphviz()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-45-output-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="41743205" class="cell" data-execution_count="46">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> model2:</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    idata2 <span class="op">=</span> pm.sample_prior_predictive()</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    idata2.extend(pm.sample(chains<span class="op">=</span><span class="dv">4</span>, draws<span class="op">=</span><span class="dv">2000</span>, random_seed<span class="op">=</span><span class="dv">42</span>))</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    idata2.extend(pm.sample_posterior_predictive(idata2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling: [y, α_age_group, α_baseline, α_education, α_gender, α_nationality]
Initializing NUTS using jitter+adapt_diag...
Multiprocess sampling (4 chains in 4 jobs)
NUTS: [α_baseline, α_age_group, α_education, α_gender, α_nationality]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"c6cdcb72f4a841c3ba51fe7af43b72d9","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Sampling 4 chains for 1_000 tune and 2_000 draw iterations (4_000 + 8_000 draws total) took 126 seconds.
Sampling: [y, α_age_group, α_baseline, α_education, α_gender, α_nationality]</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"ec1f6201acd1433ba40265f974101892","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
</div>
<div id="539c8636" class="cell" data-execution_count="47">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>az.plot_trace(idata2, backend_kwargs<span class="op">=</span><span class="bu">dict</span>(tight_layout<span class="op">=</span><span class="va">True</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-47-output-1.png" width="1137" height="945" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="86aaa6ba" class="cell" data-execution_count="48">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata2, var_names<span class="op">=</span><span class="st">'α_baseline'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[EKRE]</td>
<td>0.713</td>
<td>0.061</td>
<td>0.598</td>
<td>0.826</td>
<td>0.001</td>
<td>0.000</td>
<td>13176.0</td>
<td>6608.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_baseline[Eesti 200]</td>
<td>0.168</td>
<td>0.074</td>
<td>0.030</td>
<td>0.305</td>
<td>0.001</td>
<td>0.000</td>
<td>12135.0</td>
<td>6429.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[Undecided]</td>
<td>0.882</td>
<td>0.059</td>
<td>0.772</td>
<td>0.995</td>
<td>0.001</td>
<td>0.000</td>
<td>13437.0</td>
<td>6458.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_baseline[Isamaa]</td>
<td>-0.416</td>
<td>0.093</td>
<td>-0.586</td>
<td>-0.239</td>
<td>0.001</td>
<td>0.001</td>
<td>13360.0</td>
<td>6345.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[Keskerakond]</td>
<td>1.044</td>
<td>0.056</td>
<td>0.944</td>
<td>1.157</td>
<td>0.000</td>
<td>0.000</td>
<td>14123.0</td>
<td>6809.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_baseline[Mitte ükski erakond]</td>
<td>1.358</td>
<td>0.051</td>
<td>1.260</td>
<td>1.448</td>
<td>0.000</td>
<td>0.000</td>
<td>12378.0</td>
<td>7131.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[Other]</td>
<td>-1.457</td>
<td>0.129</td>
<td>-1.695</td>
<td>-1.215</td>
<td>0.001</td>
<td>0.001</td>
<td>13204.0</td>
<td>6783.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_baseline[Parempoolsed]</td>
<td>-1.982</td>
<td>0.151</td>
<td>-2.258</td>
<td>-1.695</td>
<td>0.001</td>
<td>0.001</td>
<td>14895.0</td>
<td>6244.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[Reformierakond]</td>
<td>0.674</td>
<td>0.066</td>
<td>0.549</td>
<td>0.797</td>
<td>0.001</td>
<td>0.000</td>
<td>13091.0</td>
<td>6590.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_baseline[Rohelised]</td>
<td>-1.073</td>
<td>0.113</td>
<td>-1.290</td>
<td>-0.866</td>
<td>0.001</td>
<td>0.001</td>
<td>13350.0</td>
<td>6760.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_baseline[SDE]</td>
<td>0.089</td>
<td>0.078</td>
<td>-0.052</td>
<td>0.237</td>
<td>0.001</td>
<td>0.001</td>
<td>11862.0</td>
<td>6514.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="50ae8c19" class="cell" data-execution_count="49">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata2, var_names<span class="op">=</span><span class="st">'α_age_group'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[16-24, EKRE]</td>
<td>-0.307</td>
<td>0.122</td>
<td>-0.537</td>
<td>-0.080</td>
<td>0.001</td>
<td>0.001</td>
<td>16900.0</td>
<td>5979.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_age_group[16-24, Eesti 200]</td>
<td>0.465</td>
<td>0.121</td>
<td>0.240</td>
<td>0.696</td>
<td>0.001</td>
<td>0.001</td>
<td>16699.0</td>
<td>6892.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[16-24, Undecided]</td>
<td>0.011</td>
<td>0.114</td>
<td>-0.205</td>
<td>0.225</td>
<td>0.001</td>
<td>0.001</td>
<td>14880.0</td>
<td>5789.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_age_group[16-24, Isamaa]</td>
<td>-0.379</td>
<td>0.167</td>
<td>-0.684</td>
<td>-0.070</td>
<td>0.001</td>
<td>0.001</td>
<td>17991.0</td>
<td>5771.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[16-24, Keskerakond]</td>
<td>-0.685</td>
<td>0.150</td>
<td>-0.959</td>
<td>-0.400</td>
<td>0.001</td>
<td>0.001</td>
<td>17828.0</td>
<td>5346.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[75+, Other]</td>
<td>-0.044</td>
<td>0.252</td>
<td>-0.509</td>
<td>0.438</td>
<td>0.002</td>
<td>0.003</td>
<td>16116.0</td>
<td>5912.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_age_group[75+, Parempoolsed]</td>
<td>0.156</td>
<td>0.279</td>
<td>-0.350</td>
<td>0.715</td>
<td>0.002</td>
<td>0.003</td>
<td>17245.0</td>
<td>6678.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[75+, Reformierakond]</td>
<td>0.209</td>
<td>0.087</td>
<td>0.052</td>
<td>0.378</td>
<td>0.001</td>
<td>0.001</td>
<td>14009.0</td>
<td>6339.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_age_group[75+, Rohelised]</td>
<td>-0.412</td>
<td>0.234</td>
<td>-0.838</td>
<td>0.033</td>
<td>0.002</td>
<td>0.002</td>
<td>14955.0</td>
<td>6332.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_age_group[75+, SDE]</td>
<td>-0.017</td>
<td>0.138</td>
<td>-0.287</td>
<td>0.228</td>
<td>0.001</td>
<td>0.002</td>
<td>14714.0</td>
<td>5968.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

<p>77 rows × 9 columns</p>
</div>
</div>
</div>
<div id="89d0d0de" class="cell" data-execution_count="50">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata2, var_names<span class="op">=</span><span class="st">'α_education'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, EKRE]</td>
<td>0.208</td>
<td>0.076</td>
<td>0.068</td>
<td>0.353</td>
<td>0.001</td>
<td>0.000</td>
<td>14723.0</td>
<td>6608.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Eesti 200]</td>
<td>-0.371</td>
<td>0.102</td>
<td>-0.553</td>
<td>-0.172</td>
<td>0.001</td>
<td>0.001</td>
<td>12680.0</td>
<td>6619.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Undecided]</td>
<td>0.053</td>
<td>0.080</td>
<td>-0.096</td>
<td>0.203</td>
<td>0.001</td>
<td>0.001</td>
<td>15074.0</td>
<td>7250.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Isamaa]</td>
<td>-0.031</td>
<td>0.107</td>
<td>-0.235</td>
<td>0.164</td>
<td>0.001</td>
<td>0.001</td>
<td>14127.0</td>
<td>6301.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Keskerakond]</td>
<td>0.321</td>
<td>0.084</td>
<td>0.165</td>
<td>0.476</td>
<td>0.001</td>
<td>0.000</td>
<td>15304.0</td>
<td>6390.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Mitte ükski erakond]</td>
<td>0.175</td>
<td>0.069</td>
<td>0.044</td>
<td>0.305</td>
<td>0.001</td>
<td>0.000</td>
<td>14289.0</td>
<td>6947.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Other]</td>
<td>0.187</td>
<td>0.166</td>
<td>-0.128</td>
<td>0.491</td>
<td>0.001</td>
<td>0.001</td>
<td>16358.0</td>
<td>5678.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Parempoolsed]</td>
<td>0.304</td>
<td>0.177</td>
<td>-0.022</td>
<td>0.640</td>
<td>0.001</td>
<td>0.001</td>
<td>16022.0</td>
<td>6039.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, Reformierakond]</td>
<td>-0.466</td>
<td>0.077</td>
<td>-0.623</td>
<td>-0.336</td>
<td>0.001</td>
<td>0.000</td>
<td>15343.0</td>
<td>6863.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Basic education, Rohelised]</td>
<td>0.001</td>
<td>0.143</td>
<td>-0.281</td>
<td>0.261</td>
<td>0.001</td>
<td>0.002</td>
<td>17370.0</td>
<td>6133.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Basic education, SDE]</td>
<td>-0.381</td>
<td>0.115</td>
<td>-0.588</td>
<td>-0.158</td>
<td>0.001</td>
<td>0.001</td>
<td>11402.0</td>
<td>6367.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, EKRE]</td>
<td>-0.336</td>
<td>0.064</td>
<td>-0.453</td>
<td>-0.214</td>
<td>0.000</td>
<td>0.000</td>
<td>16515.0</td>
<td>6292.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Eesti 200]</td>
<td>0.365</td>
<td>0.073</td>
<td>0.230</td>
<td>0.508</td>
<td>0.001</td>
<td>0.000</td>
<td>13045.0</td>
<td>6551.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Undecided]</td>
<td>-0.173</td>
<td>0.063</td>
<td>-0.291</td>
<td>-0.055</td>
<td>0.001</td>
<td>0.000</td>
<td>15164.0</td>
<td>6155.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Isamaa]</td>
<td>-0.104</td>
<td>0.084</td>
<td>-0.255</td>
<td>0.054</td>
<td>0.001</td>
<td>0.001</td>
<td>16875.0</td>
<td>6313.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Keskerakond]</td>
<td>-0.280</td>
<td>0.066</td>
<td>-0.407</td>
<td>-0.161</td>
<td>0.001</td>
<td>0.000</td>
<td>15162.0</td>
<td>6066.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Mitte ükski erakond]</td>
<td>-0.231</td>
<td>0.056</td>
<td>-0.339</td>
<td>-0.129</td>
<td>0.000</td>
<td>0.000</td>
<td>14425.0</td>
<td>6429.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Other]</td>
<td>-0.145</td>
<td>0.143</td>
<td>-0.417</td>
<td>0.121</td>
<td>0.001</td>
<td>0.001</td>
<td>17730.0</td>
<td>5713.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Parempoolsed]</td>
<td>0.050</td>
<td>0.157</td>
<td>-0.249</td>
<td>0.353</td>
<td>0.001</td>
<td>0.002</td>
<td>16159.0</td>
<td>6270.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, Reformierakond]</td>
<td>0.400</td>
<td>0.055</td>
<td>0.302</td>
<td>0.507</td>
<td>0.000</td>
<td>0.000</td>
<td>14947.0</td>
<td>6182.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Higher education, Rohelised]</td>
<td>0.029</td>
<td>0.119</td>
<td>-0.198</td>
<td>0.255</td>
<td>0.001</td>
<td>0.001</td>
<td>18364.0</td>
<td>5719.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Higher education, SDE]</td>
<td>0.425</td>
<td>0.081</td>
<td>0.272</td>
<td>0.577</td>
<td>0.001</td>
<td>0.001</td>
<td>11128.0</td>
<td>6702.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, EKRE]</td>
<td>0.128</td>
<td>0.057</td>
<td>0.027</td>
<td>0.242</td>
<td>0.001</td>
<td>0.000</td>
<td>12401.0</td>
<td>6724.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Eesti 200]</td>
<td>0.006</td>
<td>0.072</td>
<td>-0.125</td>
<td>0.144</td>
<td>0.001</td>
<td>0.001</td>
<td>11841.0</td>
<td>6781.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Undecided]</td>
<td>0.121</td>
<td>0.058</td>
<td>0.010</td>
<td>0.227</td>
<td>0.001</td>
<td>0.000</td>
<td>12417.0</td>
<td>7297.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Isamaa]</td>
<td>0.135</td>
<td>0.080</td>
<td>-0.013</td>
<td>0.285</td>
<td>0.001</td>
<td>0.001</td>
<td>12403.0</td>
<td>6082.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Keskerakond]</td>
<td>-0.041</td>
<td>0.060</td>
<td>-0.155</td>
<td>0.065</td>
<td>0.001</td>
<td>0.001</td>
<td>13487.0</td>
<td>6578.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Mitte ükski erakond]</td>
<td>0.056</td>
<td>0.051</td>
<td>-0.039</td>
<td>0.150</td>
<td>0.000</td>
<td>0.000</td>
<td>12410.0</td>
<td>7802.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Other]</td>
<td>-0.042</td>
<td>0.135</td>
<td>-0.291</td>
<td>0.218</td>
<td>0.001</td>
<td>0.001</td>
<td>16671.0</td>
<td>6445.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Parempoolsed]</td>
<td>-0.355</td>
<td>0.159</td>
<td>-0.647</td>
<td>-0.057</td>
<td>0.001</td>
<td>0.001</td>
<td>14857.0</td>
<td>6236.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Reformierakond]</td>
<td>0.067</td>
<td>0.053</td>
<td>-0.036</td>
<td>0.165</td>
<td>0.000</td>
<td>0.000</td>
<td>12447.0</td>
<td>6660.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_education[Secondary education, Rohelised]</td>
<td>-0.030</td>
<td>0.110</td>
<td>-0.240</td>
<td>0.172</td>
<td>0.001</td>
<td>0.001</td>
<td>14568.0</td>
<td>6149.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_education[Secondary education, SDE]</td>
<td>-0.044</td>
<td>0.079</td>
<td>-0.185</td>
<td>0.112</td>
<td>0.001</td>
<td>0.001</td>
<td>10521.0</td>
<td>6345.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="d7d3d8e2" class="cell" data-execution_count="51">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata2, var_names<span class="op">=</span><span class="st">'α_gender'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, EKRE]</td>
<td>-0.228</td>
<td>0.041</td>
<td>-0.308</td>
<td>-0.157</td>
<td>0.000</td>
<td>0.000</td>
<td>17338.0</td>
<td>6441.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Female, Eesti 200]</td>
<td>0.031</td>
<td>0.047</td>
<td>-0.057</td>
<td>0.118</td>
<td>0.000</td>
<td>0.000</td>
<td>16743.0</td>
<td>6071.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, Undecided]</td>
<td>0.178</td>
<td>0.041</td>
<td>0.101</td>
<td>0.253</td>
<td>0.000</td>
<td>0.000</td>
<td>15502.0</td>
<td>6196.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Female, Isamaa]</td>
<td>-0.209</td>
<td>0.053</td>
<td>-0.306</td>
<td>-0.110</td>
<td>0.000</td>
<td>0.000</td>
<td>18282.0</td>
<td>5863.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, Keskerakond]</td>
<td>0.059</td>
<td>0.043</td>
<td>-0.023</td>
<td>0.139</td>
<td>0.000</td>
<td>0.000</td>
<td>17925.0</td>
<td>6789.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Female, Mitte ükski erakond]</td>
<td>0.005</td>
<td>0.036</td>
<td>-0.062</td>
<td>0.072</td>
<td>0.000</td>
<td>0.000</td>
<td>13068.0</td>
<td>5882.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, Other]</td>
<td>-0.089</td>
<td>0.092</td>
<td>-0.259</td>
<td>0.088</td>
<td>0.001</td>
<td>0.001</td>
<td>15853.0</td>
<td>5529.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Female, Parempoolsed]</td>
<td>-0.018</td>
<td>0.101</td>
<td>-0.206</td>
<td>0.175</td>
<td>0.001</td>
<td>0.001</td>
<td>17983.0</td>
<td>6359.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, Reformierakond]</td>
<td>0.009</td>
<td>0.035</td>
<td>-0.056</td>
<td>0.074</td>
<td>0.000</td>
<td>0.000</td>
<td>14718.0</td>
<td>6247.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Female, Rohelised]</td>
<td>0.087</td>
<td>0.078</td>
<td>-0.056</td>
<td>0.237</td>
<td>0.001</td>
<td>0.001</td>
<td>17240.0</td>
<td>6054.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Female, SDE]</td>
<td>0.174</td>
<td>0.050</td>
<td>0.082</td>
<td>0.270</td>
<td>0.000</td>
<td>0.000</td>
<td>12087.0</td>
<td>6810.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, EKRE]</td>
<td>0.228</td>
<td>0.041</td>
<td>0.157</td>
<td>0.308</td>
<td>0.000</td>
<td>0.000</td>
<td>17338.0</td>
<td>6441.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Male, Eesti 200]</td>
<td>-0.031</td>
<td>0.047</td>
<td>-0.118</td>
<td>0.057</td>
<td>0.000</td>
<td>0.000</td>
<td>16743.0</td>
<td>6071.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, Undecided]</td>
<td>-0.178</td>
<td>0.041</td>
<td>-0.253</td>
<td>-0.101</td>
<td>0.000</td>
<td>0.000</td>
<td>15502.0</td>
<td>6196.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Male, Isamaa]</td>
<td>0.209</td>
<td>0.053</td>
<td>0.110</td>
<td>0.306</td>
<td>0.000</td>
<td>0.000</td>
<td>18282.0</td>
<td>5863.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, Keskerakond]</td>
<td>-0.059</td>
<td>0.043</td>
<td>-0.139</td>
<td>0.023</td>
<td>0.000</td>
<td>0.000</td>
<td>17925.0</td>
<td>6789.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Male, Mitte ükski erakond]</td>
<td>-0.005</td>
<td>0.036</td>
<td>-0.072</td>
<td>0.062</td>
<td>0.000</td>
<td>0.000</td>
<td>13068.0</td>
<td>5882.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, Other]</td>
<td>0.089</td>
<td>0.092</td>
<td>-0.088</td>
<td>0.259</td>
<td>0.001</td>
<td>0.001</td>
<td>15853.0</td>
<td>5529.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Male, Parempoolsed]</td>
<td>0.018</td>
<td>0.101</td>
<td>-0.175</td>
<td>0.206</td>
<td>0.001</td>
<td>0.001</td>
<td>17983.0</td>
<td>6359.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, Reformierakond]</td>
<td>-0.009</td>
<td>0.035</td>
<td>-0.074</td>
<td>0.056</td>
<td>0.000</td>
<td>0.000</td>
<td>14718.0</td>
<td>6247.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_gender[Male, Rohelised]</td>
<td>-0.087</td>
<td>0.078</td>
<td>-0.237</td>
<td>0.056</td>
<td>0.001</td>
<td>0.001</td>
<td>17240.0</td>
<td>6054.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_gender[Male, SDE]</td>
<td>-0.174</td>
<td>0.050</td>
<td>-0.270</td>
<td>-0.082</td>
<td>0.000</td>
<td>0.000</td>
<td>12087.0</td>
<td>6810.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="e1976939" class="cell" data-execution_count="52">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata2, var_names<span class="op">=</span><span class="st">'α_nationality'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="51">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, EKRE]</td>
<td>0.169</td>
<td>0.053</td>
<td>0.073</td>
<td>0.271</td>
<td>0.000</td>
<td>0.000</td>
<td>14414.0</td>
<td>6430.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Eesti 200]</td>
<td>0.130</td>
<td>0.057</td>
<td>0.018</td>
<td>0.233</td>
<td>0.000</td>
<td>0.000</td>
<td>15715.0</td>
<td>7377.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Undecided]</td>
<td>-0.159</td>
<td>0.046</td>
<td>-0.244</td>
<td>-0.072</td>
<td>0.000</td>
<td>0.000</td>
<td>14413.0</td>
<td>7107.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Isamaa]</td>
<td>0.518</td>
<td>0.079</td>
<td>0.366</td>
<td>0.660</td>
<td>0.001</td>
<td>0.000</td>
<td>13569.0</td>
<td>6383.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Keskerakond]</td>
<td>-0.675</td>
<td>0.045</td>
<td>-0.756</td>
<td>-0.590</td>
<td>0.000</td>
<td>0.000</td>
<td>14815.0</td>
<td>6751.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Mitte ükski erakond]</td>
<td>-0.294</td>
<td>0.040</td>
<td>-0.373</td>
<td>-0.222</td>
<td>0.000</td>
<td>0.000</td>
<td>13450.0</td>
<td>6685.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Other]</td>
<td>-0.225</td>
<td>0.095</td>
<td>-0.400</td>
<td>-0.044</td>
<td>0.001</td>
<td>0.001</td>
<td>16229.0</td>
<td>5764.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Parempoolsed]</td>
<td>-0.145</td>
<td>0.106</td>
<td>-0.340</td>
<td>0.052</td>
<td>0.001</td>
<td>0.001</td>
<td>15378.0</td>
<td>6900.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Reformierakond]</td>
<td>0.730</td>
<td>0.057</td>
<td>0.625</td>
<td>0.837</td>
<td>0.000</td>
<td>0.000</td>
<td>13500.0</td>
<td>6581.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, Rohelised]</td>
<td>-0.015</td>
<td>0.088</td>
<td>-0.183</td>
<td>0.145</td>
<td>0.001</td>
<td>0.001</td>
<td>14598.0</td>
<td>6308.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Estonian, SDE]</td>
<td>-0.033</td>
<td>0.058</td>
<td>-0.140</td>
<td>0.080</td>
<td>0.001</td>
<td>0.001</td>
<td>11830.0</td>
<td>6737.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, EKRE]</td>
<td>-0.169</td>
<td>0.053</td>
<td>-0.271</td>
<td>-0.073</td>
<td>0.000</td>
<td>0.000</td>
<td>14414.0</td>
<td>6430.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Eesti 200]</td>
<td>-0.130</td>
<td>0.057</td>
<td>-0.233</td>
<td>-0.018</td>
<td>0.000</td>
<td>0.000</td>
<td>15715.0</td>
<td>7377.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Undecided]</td>
<td>0.159</td>
<td>0.046</td>
<td>0.072</td>
<td>0.244</td>
<td>0.000</td>
<td>0.000</td>
<td>14413.0</td>
<td>7107.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Isamaa]</td>
<td>-0.518</td>
<td>0.079</td>
<td>-0.660</td>
<td>-0.366</td>
<td>0.001</td>
<td>0.000</td>
<td>13569.0</td>
<td>6383.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Keskerakond]</td>
<td>0.675</td>
<td>0.045</td>
<td>0.590</td>
<td>0.756</td>
<td>0.000</td>
<td>0.000</td>
<td>14815.0</td>
<td>6751.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Mitte ükski erakond]</td>
<td>0.294</td>
<td>0.040</td>
<td>0.222</td>
<td>0.373</td>
<td>0.000</td>
<td>0.000</td>
<td>13450.0</td>
<td>6685.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Other]</td>
<td>0.225</td>
<td>0.095</td>
<td>0.044</td>
<td>0.400</td>
<td>0.001</td>
<td>0.001</td>
<td>16229.0</td>
<td>5764.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Parempoolsed]</td>
<td>0.145</td>
<td>0.106</td>
<td>-0.052</td>
<td>0.340</td>
<td>0.001</td>
<td>0.001</td>
<td>15378.0</td>
<td>6900.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, Reformierakond]</td>
<td>-0.730</td>
<td>0.057</td>
<td>-0.837</td>
<td>-0.625</td>
<td>0.000</td>
<td>0.000</td>
<td>13500.0</td>
<td>6581.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">α_nationality[Other, Rohelised]</td>
<td>0.015</td>
<td>0.088</td>
<td>-0.145</td>
<td>0.183</td>
<td>0.001</td>
<td>0.001</td>
<td>14598.0</td>
<td>6308.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">α_nationality[Other, SDE]</td>
<td>0.033</td>
<td>0.058</td>
<td>-0.080</td>
<td>0.140</td>
<td>0.001</td>
<td>0.001</td>
<td>11830.0</td>
<td>6737.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The fit took predictably longer; 2 minutes and 20 seconds on my macbook air m2. Moreover, * There were no divergences; * Posteriors look sound and the traces exhibit good mixing for all chains; * All <span class="math inline">\(\hat{R}\)</span> values were 1 * Bulk and tail ESS are about the same as the model with two predictors and relatively informative priors suggesting sampling efficiency has not deteriorated as a result of the increased model complexity.</p>
<div id="e3a8e6ac" class="cell" data-execution_count="53">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>f, (axl, axr) <span class="op">=</span> plot_forward_samples(idata2, categories<span class="op">=</span>party_choice_label, categories_name<span class="op">=</span><span class="st">'party choice'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>axl.set_xticklabels(axl.get_xticklabels(), rotation<span class="op">=</span><span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>axl.bar(x<span class="op">=</span>axl.get_xticks(), height<span class="op">=</span>mean_win.values,  color<span class="op">=</span><span class="st">'k'</span>, fill<span class="op">=</span><span class="va">False</span>, lw<span class="op">=</span><span class="dv">3</span>, width<span class="op">=</span><span class="dv">1</span>, zorder<span class="op">=</span><span class="dv">13</span>, label<span class="op">=</span><span class="st">'data'</span>)<span class="op">;</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>axr.set_xticklabels(axr.get_xticklabels(), rotation<span class="op">=</span><span class="dv">60</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="elections_estonia_files/figure-html/cell-53-output-1.png" width="1137" height="604" class="figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{"2562f6b01a6b4950937f21f927411934":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"4f0dff72c25d432b9f2435a475b94aac":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_55d9aba74bb54d57879d06c6693283ae","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:01:21</span>\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:01:21\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"55d9aba74bb54d57879d06c6693283ae":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"5ef96618f53c4ea78e2f7ca9e12c87ca":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_6305a4e24d0b449eb195883fc3c08236","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:01:21</span>\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:01:21\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"6305a4e24d0b449eb195883fc3c08236":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"8a8cf629ab994101b03d794eed70a6b0":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_2562f6b01a6b4950937f21f927411934","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling 4 chains, 0 divergences <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:01:18</span>\n</pre>\n","text/plain":"Sampling 4 chains, 0 divergences \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:01:18\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"ba1d691ae31849dfa18da26c897ee048":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_ff4cc832065443c9bb2bdb70cf08dec2","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling 4 chains, 0 divergences <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:01:27</span>\n</pre>\n","text/plain":"Sampling 4 chains, 0 divergences \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:01:27\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"c6cdcb72f4a841c3ba51fe7af43b72d9":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_f9ce6666b335440bbffe7a533d20a41b","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling 4 chains, 0 divergences <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:02:06</span>\n</pre>\n","text/plain":"Sampling 4 chains, 0 divergences \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:02:06\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"c93d968497be4888b8bb90e3ab3c74fb":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"ec1f6201acd1433ba40265f974101892":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_c93d968497be4888b8bb90e3ab3c74fb","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">Sampling ... <span style=\"color: #008000; text-decoration-color: #008000\">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span style=\"color: #800080; text-decoration-color: #800080\">100%</span> <span style=\"color: #008080; text-decoration-color: #008080\">0:00:00</span> / <span style=\"color: #808000; text-decoration-color: #808000\">0:01:23</span>\n</pre>\n","text/plain":"Sampling ... \u001b[32m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[35m100%\u001b[0m \u001b[36m0:00:00\u001b[0m / \u001b[33m0:01:23\u001b[0m\n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"f9ce6666b335440bbffe7a533d20a41b":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"ff4cc832065443c9bb2bdb70cf08dec2":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}}},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/erdemkarakoylu\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>